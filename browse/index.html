<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Extensions - Blueprint</title>
    <link href="/.modules/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/.modules/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/.modules/global/global.css?version=2" rel="stylesheet">
    <link href="/browse/index.css?version=2" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <script defer src="/yay/script.js"></script>
    <script>
      window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
      plausible.init({
        endpoint: "/yay/event"
      })
    </script>

    <!-- Social Embeds -->
    <meta property="theme-color" content="#3b7cfe">
    <meta property="og:title" content="blueprint.zip">
    <meta property="og:description" content="Powerful, fast and developer-friendly extension framework for Pterodactyl. Utilize extension APIs, inject HTML, modify stylesheets, package extensions and so much more.">
    <meta property="og:url" content="https://blueprint.zip">
    <meta property="og:image" content="/.assets/brand/og.jpg">
    <meta property="og:type" content="website">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://blueprint.zip">
    <meta property="twitter:title" content="blueprint.zip">
    <meta property="twitter:description" content="Powerful, fast and developer-friendly extension framework for Pterodactyl. Utilize extension APIs, inject HTML, modify stylesheets, package extensions and so much more.">
    <meta property="twitter:image" content="/.assets/brand/og.jpg">
  </head>

  <body data-bs-theme="dark">

    <!-- Desktop Navbar -->
    <div class="sticky-top start-0 w-100" style="top: -1000px;">
      <div class="bg-primary p-2 text-center">
        <b>Mind filling out a quick survey about Blueprint?</b>
        <i class="bi bi-dot"></i>
        <a href="https://bpfw.io/survey" target="_blank" class="placeholder-wave text-body">
            Sure!
          <i class="bi bi-arrow-right"></i>
        </a>
      </div>
    </div>

    <header class="p-3 mb-0 border-bottom sticky-top d-lg-block d-none blueprint-navbar">
      <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
          <a href="/" class="d-flex align-items-center mb-2 me-3 mb-lg-0 link-body-emphasis text-decoration-none">
            <img src="/.assets/brand/retro.png" height="30" alt="" />
          </a>
          <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
            <li><a href="/" class="nav-link px-2 link-body-emphasis">Home</a></li>
            <li><a href="." class="nav-link px-2 link-secondary">Browse</a></li>
            <li><a href="/docs" class="nav-link px-2 link-body-emphasis">Documentation</a></li>
          </ul>
          <ul class="navbar-nav flex-row flex-wrap ms-md-auto">
            <li class="nav-item me-1 ms-1"><a class="nav-link px-1 nav-svg" href="https://bsky.app/profile/blueprint.zip"><img src="/.assets/storage/icons/bluesky.svg"/></a></li>
            <li class="nav-item me-1 ms-1 py-1"><a class="nav-link px-1" href="https://discord.com/servers/blueprint-1063548024825057451"><i class="bi bi-discord"></i></a></li>
            <li class="nav-item me-1 ms-1 py-1"><a class="nav-link px-1" href="https://github.com/BlueprintFramework"><i class="bi bi-github"></i></a></li>
            <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
              <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
              <hr class="d-lg-none my-2 text-white-50">
            </li>
            <li class="nav-item dropdown">
              <button class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (dark)">
                <i class="bi bi-moon-stars-fill my-1 theme-icon-active"></i>
                <span class="d-lg-none ms-2" id="bd-theme-text">Toggle theme</span>
              </button>
              <ul class="dropdown-menu dropdown-menu-end position-absolute gap-1 p-2 rounded-3 mx-0 border-0 shadow w-220px" aria-labelledby="bd-theme-text">
                <li><button type="button" class="theme-switcher-btn dropdown-item rounded-2 d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false"><i class="bi bi-sun-fill me-2 opacity-50"></i> Light</button></li>
                <li><button type="button" class="theme-switcher-btn dropdown-item rounded-2 d-flex align-items-center active" data-bs-theme-value="dark" aria-pressed="true"><i class="bi bi-moon-stars-fill me-2 opacity-50"></i> Dark</button></li>
                <li><button type="button" class="theme-switcher-btn dropdown-item rounded-2 d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="false"><i class="bi bi-circle-half me-2 opacity-50"></i> Auto</button></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </header>

    <!-- Mobile/Tablet Navbar -->
    <nav class="navbar sticky-top d-lg-none d-block blueprint-navbar-mobile">
      <div class="container-fluid">
        <a href="/" class="d-flex align-items-center mx-2 my-3 mb-lg-0 link-body-emphasis text-decoration-none"><img src="/.assets/brand/retro.png" height="35" alt="" /></a>
        <button class="btn btn-secondary bg-dark-subtle border-0 nav-dropdown-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </nav>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Navigation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item">
            <a href="/" class="btn rounded-2 d-flex gap-2 py-2 px-3 lh-sm text-start align-items-center position-absolute mobile-nav-link">
              <div>
                <i class="bi bi-house-fill h1"></i>
              </div>
              <div class="text-truncate">
                <strong class="d-block">Home</strong>
                <small>Learn more about Blueprint, what is is, and why it was made</small>
              </div>
            </a>
            <div class="mobile-nav-spacer"></div>
          </li>
          <li class="nav-item">
            <a href="/browse" class="btn rounded-2 d-flex gap-2 py-2 px-3 lh-sm text-start align-items-center position-absolute mobile-nav-link bg-dark-subtle">
              <div>
                <i class="bi bi-puzzle-fill h1"></i>
              </div>
              <div class="text-truncate">
                <strong class="d-block">Browse</strong>
                <small>Explore and search extensions made by the community</small>
              </div>
            </a>
            <div class="mobile-nav-spacer"></div>
          </li>
          <li class="nav-item">
            <a href="/docs" class="btn rounded-2 d-flex gap-2 py-2 px-3 lh-sm text-start align-items-center position-absolute mobile-nav-link">
              <div>
                <i class="bi bi-book-fill h1"></i>
              </div>
              <div class="text-truncate">
                <strong class="d-block">Documentation</strong>
                <small>Guides and docs about interacting with Blueprint</small>
              </div>
            </a>
            <div class="mobile-nav-spacer"></div>
          </li>
          <div class="mobile-theme-switcher row position-absolute start-0 bottom-0 ms-1 mb-4">
            <div class="col-4">
              <a href="javascript:void" class="rounded-2 mobile-theme-switcher-btn" data-bs-theme-value="light">
                <i class="bi bi-sun-fill opacity-50 text-body" style="padding: 0 50%;"></i>
              </a>
            </div>
            <div class="col-4">
              <a href="javascript:void" class="rounded-2 mobile-theme-switcher-btn" data-bs-theme-value="dark">
                <i class="bi bi-moon-stars-fill opacity-50 text-body" style="padding: 0 50%;"></i>
              </a>
            </div>
            <div class="col-4">
              <a href="javascript:void" class="rounded-2 mobile-theme-switcher-btn" data-bs-theme-value="auto">
                <i class="bi bi-circle-half opacity-50 text-body" style="padding: 0 50%;"></i>
              </a>
            </div>
          </div>
        </ul>
      </div>
    </div>



    <!-- Content -->
    <div class="bp-grid mb-5" style="overflow-x:hidden">
      <div class="bp-fade">
        <div class="container">
          <div class="row flex-lg-row-reverse align-items-center g-5 pt-5">
            <div class="col-lg-7 col-sm-12">
              <h1 class="display-4 fw-normal lh-1 mb-3 d-lg-inline d-none byte-txt" style="color: #bbd7ff">Discover <b>powerful extensions</b>.</h1>
              <h1 class="display-4 fw-normal lh-1 mb-2 d-lg-none d-block text-center byte-txt" style="color: #fff">Discover <b>powerful extensions</b>.</h1>
            </div>
            <div class="col-5 d-none d-sm-none d-lg-inline">
              <img src="/.assets/storage/misc/png/3.png" class="d-block mx-lg-auto img-fluid byte-img" alt="byte.sh" loading="lazy" width="700" height="500">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sorting -->
    <div class="container mb-4 position-sticky g-5" style="top: 90px; z-index: 5;">
      <div
        class="row bg-dark-subtle rounded-3 border py-2"
        style="border: rgba(255,255,255,0.15) 1px;"
      >
        <div class="d-flex flex-row py-1">

          <!-- Search -->
          <div class="input-group me-2">
            <span class="input-group-text border-0 pe-0"><i class="bi bi-search"></i></span>
            <button
              id="filterDropdown"
              class="btn btn-secondary bg-body-tertiary border-0 dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <span id="filterTypeLabel">Products</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end gap-1 p-2 rounded-3 mx-0 border-0 shadow" aria-labelledby="filterDropdown">
              <li>
                <a class="dropdown-item rounded-2" id="toggleFilterProducts" data-filter="products">
                  Products
                </a>
              </li>
              <li>
                <a class="dropdown-item rounded-2" id="toggleFilterAuthors" data-filter="authors">
                  Authors
                </a>
              </li>
            </ul>
            <input
              type="text"
              class="form-control bg-dark border-0"
              id="productSearch"
              placeholder="Search products..">

            <span class="d-none d-md-block input-group-text border-0 pe-0"><i class="bi bi-sort-down"></i></span>
            <button
              id="sortDropdown"
              class="btn btn-secondary bg-body-tertiary border-0 dropdown-toggle d-none d-md-block"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <span id="sortLabel">Name</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end gap-1 p-2 rounded-3 mx-0 border-0 shadow" aria-labelledby="filterDropdown">
              <li>
                <a class="dropdown-item rounded-2" id="toggleSortName" data-sort="name">
                  Name
                </a>
              </li>
              <li>
                <a class="dropdown-item rounded-2" id="toggleSortCreated" data-sort="created">
                  Created
                </a>
              </li>
              <li>
                <a class="dropdown-item rounded-2" id="toggleSortAuthor" data-sort="author">
                  Author
                </a>
              </li>
              <li>
                <a class="dropdown-item rounded-2" id="toggleSortpopularity" data-sort="popularity">
                  Popularity
                </a>
              </li>
              <li>
                <a class="dropdown-item rounded-2" id="toggleSortRating" data-sort="rating">
                  Rating
                </a>
              </li>
              <li>
                <a class="dropdown-item rounded-2" id="ToggleSortPrice" data-sort="price">
                  Price
                </a>
              </li>
            </ul>
          </div>

          <!-- Filters -->
          <div class="d-md-flex flex-row d-none" style="width: auto;">
            <div class="input-group flex-row me-2" style="flex-wrap: nowrap;">
              <span class="input-group-text border-0">
                <input class="form-check-input mt-0" type="checkbox" value="" id="filterExtensions">
              </span>
              <span class="input-group-text ps-0 border-0"><label for="filterExtensions">Extensions</label></span>
            </div>
            <div class="input-group flex-row" style="flex-wrap: nowrap;">
              <span class="input-group-text border-0">
                <input class="form-check-input mt-0" type="checkbox" value="" id="filterThemes">
              </span>
              <span class="input-group-text ps-0 border-0"><label for="filterThemes">Themes</label></span>
            </div>
          </div>
          <div class="d-flex flex-row d-md-none" style="width: auto;">
            <div class="input-group flex-row" style="flex-wrap: nowrap;">
              <button
                class="btn btn-secondary bg-body-tertiary border-0"
                type="button"
                aria-expanded="false"
                data-bs-toggle="modal"
                data-bs-target="#filterModal"
              >
                <i class="bi bi-three-dots"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="filterModal" aria-hidden="true" aria-labelledby="filterModalLabel" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="filterModalLabel"><i class="bi bi-filter"></i> Filters</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-4">
              <p>
                <b>Extension type</b>
              </p>
              <div class="input-group mb-2">

                <span class="input-group-text border-0 rounded-start-2">
                  <input class="form-check-input mt-0" type="checkbox" value="" onclick='document.getElementById("filterExtensions").click()' id="filterModalExtensions">
                </span>
                <span class="input-group-text ps-0 border-0 rounded-end-2 me-2"><label for="filterModalExtensions">Extensions</label></span>

                <span class="input-group-text border-0 rounded-start-2">
                  <input class="form-check-input mt-0" type="checkbox" value="" onclick='document.getElementById("filterThemes").click()' id="filterModalThemes">
                </span>
                <span class="input-group-text ps-0 border-0 rounded-end-2"><label for="filterModalThemes">Themes</label></span>

              </div>
            </div>
            <div>
              <p>
                <b>Sorting</b>
              </p>
              <div class="input-group mb-2">

                <span class="input-group-text border-0 pe-0"><i class="bi bi-sort-down"></i></span>
                <button
                  id="mobileSortDropdown"
                  class="btn btn-secondary bg-body-tertiary border-0 dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <span id="mobileSortLabel">Name</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end gap-1 p-2 rounded-3 mx-0 border-0 shadow" aria-labelledby="filterDropdown">
                  <li>
                    <a class="dropdown-item rounded-2" id="mobileToggleSortName" data-sort="name">
                      Name
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item rounded-2" id="mobileToggleSortCreated" data-sort="created">
                      Created
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item rounded-2" id="mobileToggleSortAuthor" data-sort="author">
                      Author
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item rounded-2" id="mobileToggleSortpopularity" data-sort="popularity">
                      Popularity
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item rounded-2" id="mobileToggleSortRating" data-sort="rating">
                      Rating
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item rounded-2" id="mobileToggleSortPrice" data-sort="price">
                      Price
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>



    <!-- Products -->
    <div class="container">
      <div class="row" id="products"></div>
      <div class="row" id="byte-confused" style="display: none">
        <p class="text-center"><img src="/.assets/storage/misc/png/5.png" class="byte-confused-img" style="width: 150px; opacity: .2"></p>
      </div>
    </div>


    <!-- Footer -->
    <div class="container">
      <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
        <div class="col-md-4 d-flex align-items-center">
          <a href="/" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1">
            <svg viewBox="0 0 500 500" class="text-body-secondary" xmlns="http://www.w3.org/2000/svg" width="30" height="24" fill="currentColor">
              <rect x="0" y="166.6666" width="166.6666" height="166.6666"/>
              <rect x="166.6666" y="0" width="166.6666" height="166.6666"/>
              <rect x="166.6666" y="333.3332" width="166.667" height="166.6666"/>
              <rect x="333.3332" y="166.6666" width="166.667" height="333.3332"/>
            </svg>
          </a>
          <span class="mb-3 mb-md-0 text-body-secondary">© 2023-<span class="currentYear">2025</span> Emma (<a href="https://prpl.wtf" class="text-body-secondary" target="_blank">prpl.wtf</a>)</span>
        </div>

        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
          <li class="ms-3"><a class="text-body-secondary" href="https://discord.com/servers/blueprint-1063548024825057451"><i class="bi bi-discord" width="24" height="24"></i></a></li>
          <li class="ms-3"><a class="text-body-secondary" href="https://github.com/BlueprintFramework"><i class="bi bi-github" width="24" height="24"></i></a></li>
          <li class="ms-3"><a class="text-body-secondary" href="https://hcb.hackclub.com/donations/start/blueprint"><i class="bi bi-chat-right-heart-fill" width="24" height="24"></i></a></li>
        </ul>
      </footer>
    </div>

    <div id="social-push">
      <div>
        <p>
          <b>Become part of Blueprint's Discord community</b> and be one of the first to get notified about new extension releases and framework updates.
        </p>
        <a href="https://discord.com/servers/blueprint-1063548024825057451" class="link-underline link-underline-opacity-0 me-3"><i class="bi bi-discord me-1"></i> Join the community</a>
        <a href="javascript:void" onclick="dismissSocial()" class="link-underline link-underline-opacity-0 pe-pointer text-secondary"><i class="bi bi-x-lg me-1"></i> Close</a>
      </div>
    </div>

    <script src="/.modules/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/.modules/bootstrap/etc/theme-switcher.js"></script>
    <script src="/.modules/global/global.js"></script>
    <script>
      const filterTypeLabel = document.getElementById("filterTypeLabel"),
        sortLabel = document.getElementById("sortLabel"),
        mobileSortLabel = document.getElementById("mobileSortLabel"),
        searchInput = document.getElementById("productSearch");

      /**
       * @typedef {{
       *  name: string;
       *  summary: string;
       *  banner: { lowres: string; highres: string; };
       *  identifier: string;
       *  author: { name: string; };
       *  type: 'theme' | 'extension';
       *  created: string;
       *  platforms: Record<string, {
       *   url: string;
       *   price: number;
       *   currency: string;
       *   reviews: number;
       *   rating?: number;
       *  }>;
       *  stats: {
       *   panels: number;
       *  };
       * }} Product
       *
       * @type {Product[]}
       */
      let allProducts = [];

      /** @type {'products' | 'authors'} */
      let filterType = "products";

      /** @type {'name' | 'created' | 'author' | 'popularity' | 'rating' | 'price'} */
      let sortType = "name";

      /** @type {Object<string, [name: string, icon: string]>} */
      const platforms = {
        BUILTBYBIT: ["BuiltByBit", "BBB.png"],
        SOURCEXCHANGE: ["sourceXchange", "SXC.png"],
        GITHUB: ["GitHub", "GH.png"],
      };

      /** @type {Object<string, [currency: string, symbol: string]>} */
      const currencySymbols = {
        USD: '$',
        GBP: '£',
        EUR: '€'
      };

      /**
       * @param {Product[]} products
       * @returns {Product[]}
       */
      function sortProducts(products) {
        switch (sortType) {
          case "created":
            return products.sort((a, b) => new Date(a.created) < new Date(b.created) ? -1 : 1).reverse();
          case "author":
            return products.sort((a, b) => a.author.name.localeCompare(b.author.name));
          case "popularity":
            return products.sort((a, b) => b.stats.panels - a.stats.panels);
          case "rating":
            return products.map((product) => {
              const totalReviews = Object.values(product.platforms).reduce((sum, platform) => sum + platform.reviews, 0);
              const platformsWithRatings = Object.values(product.platforms).filter((x) => x.rating);
              const averageRating = platformsWithRatings.length > 0
                ? platformsWithRatings.reduce((sum, platform) => sum + platform.rating, 0) / platformsWithRatings.length
                : 0;

              return {
                product,
                ratingIndex: averageRating * totalReviews,
              };
            }).sort((a, b) => b.ratingIndex - a.ratingIndex).map((x) => x.product);
          case "price":
            return products.sort((a, b) => {
              const priceA = Math.min(...Object.values(a.platforms).map(platform => platform.price));
              const priceB = Math.min(...Object.values(b.platforms).map(platform => platform.price));
              return priceA - priceB;
            });
          default:
            return products.sort((a, b) => a.name.localeCompare(b.name));
        }
      }

      /** @param {Product[]} products */
      function displayProducts(products) {
        const productList = document.getElementById("products");
        productList.innerHTML = "";
        const twoWeeksAgo = new Date();
        twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 14);

        for (const product of sortProducts(products)) {
          const listItem = document.createElement("div");
          const categoryClass =
            product.type === "theme" ? "filter-themes" : "filter-extensions";

          const createdDate = new Date(product.created);
          const isNew = createdDate > twoWeeksAgo;

          const lowestPrice = Object.values(product.platforms)
            .reduce((lowest, platform) => platform.price < lowest.price ? platform : lowest, { price: Infinity });

          const price = lowestPrice.price;
          const currency = lowestPrice.currency || "USD"; // Fallback to USD if no currency is defined ( just in case :) )
          const symbol = currencySymbols[currency];

          listItem.className =
            "col-sm-12 col-md-6 col-lg-4 mb-4 " + categoryClass;
          listItem.innerHTML = `
            <a href="/browse/${product.identifier}" class="text-decoration-none text-body">
              <div class="card overflow-hidden bg-dark-subtle">
                <div class="position-relative">
                  <img src="${
                    product.banner.lowres
                  }" onclick="setTimeout(() => {document.getElementById('${
                    product.identifier
                  }Button').click()}, 1)" class="card-img-top img-dim product-image" alt="${
                    product.name
                  }"/>
                  ${price ? `
                  <span class="badge bg-dark text-body-emphasis position-absolute top-0 end-0 me-2 border border-top-0 rounded-top-0 fw-normal" id="pricetag">
                    <b>${symbol}${price.toFixed(2)}</b>
                  </span>
                  ` : ''}
                </div>
                <div class="card-body">
                  <h5 class="card-title text-truncate">${
                    product.name
                  } <span class="author-tag">by ${product.author.name}</span></h5>
                  <p class="card-text text-truncate mb-0">${product.summary}</p>
                  ${
                    (isNew) ? (`
                      <span class="badge bg-primary text-body-emphasis placeholder-wave position-absolute rounded-pill top-0 start-0 m-2">
                        <i class="bi bi-stars"></i>
                        <b>NEW</b>
                      </span>
                    `) : ('')
                  }
                </div>
              </div>
            </a>
          `;

          productList.appendChild(listItem);
        }
      }

      function filterProducts() {
        const searchQuery = document
          .getElementById("productSearch")
          .value.toLowerCase();

        /** @type {Product[]} */
        let filteredItems = [];

        // Filter logic based on type (Products or Authors)
        if (filterType === "products") {
          filteredItems = allProducts.filter(
            (product) =>
              product.name.toLowerCase().includes(searchQuery) ||
              product.summary.toLowerCase().includes(searchQuery)
          );
        } else if (filterType === "authors") {
          filteredItems = allProducts.filter((product) =>
            product.author.name.toLowerCase().includes(searchQuery)
          );
        }

        // Apply category filters
        const extensionsChecked =
          document.getElementById("filterExtensions").checked;
        const themesChecked = document.getElementById("filterThemes").checked;

        if (!extensionsChecked) {
          filteredItems = filteredItems.filter(
            (product) => product.category !== "extension"
          );
        }

        if (!themesChecked) {
          filteredItems = filteredItems.filter(
            (product) => product.category !== "theme"
          );
        }

        displayProducts(filteredItems);
      }

      // Handle filter dropdown toggle
      document.querySelectorAll(".dropdown-item").forEach((item) => {
        item.addEventListener("click", (event) => {
          event.preventDefault();

          /** @type {typeof filterType} */
          const selectedFilter = item.dataset.filter;

          // Update filter type and label
          if (selectedFilter === "products") {
            filterTypeLabel.textContent = "Products";
            searchInput.placeholder = "Search products..";
            filterType = "products";
          } else if (selectedFilter === "authors") {
            filterTypeLabel.textContent = "Authors";
            searchInput.placeholder = "Search authors..";
            filterType = "authors";
          }

          /** @type {typeof sortType} */
          const selectedSort = item.dataset.sort;

          switch (selectedSort) {
            case "name":
              sortLabel.textContent = "Name";
              mobileSortLabel.textContent = "Name";
              sortType = "name";
              break;

            case "created":
              sortLabel.textContent = "Created";
              mobileSortLabel.textContent = "Created";
              sortType = "created";
              break;

            case "author":
              sortLabel.textContent = "Author";
              mobileSortLabel.textContent = "Author";
              sortType = "author";
              break;

            case "popularity":
              sortLabel.textContent = "Popularity";
              mobileSortLabel.textContent = "Popularity";
              sortType = "popularity";
              break;

            case "rating":
              sortLabel.textContent = "Rating";
              mobileSortLabel.textContent = "Rating";
              sortType = "rating";
              break;
            case "price":
              sortLabel.textContent = "Price";
              mobileSortLabel.textContent = "Price";
              sortType = "price";
              break;
          }

          // Apply filters
          filterProducts();
        });
      });

      // Event listeners for filtering
      document
        .getElementById("productSearch")
        .addEventListener("input", filterProducts);
      document
        .getElementById("filterExtensions")
        .addEventListener("change", filterProducts);
      document
        .getElementById("filterThemes")
        .addEventListener("change", filterProducts);

      // Load products
      fetch("https://api.blueprintframe.work/api/extensions")
        .then((response) => response.json())
        .then((data) => {
          allProducts = data;
          displayProducts(data);
        });
    </script>
    <style id="css-filter-themes"></style>
    <style id="css-filter-extensions"></style>
    <script>
      function param(key, value) {
        let u = new URL(window.location.href);
        u.searchParams.set(key, value);
        window.history.replaceState({}, "", u.toString());
      }

      const filterThemes = document.getElementById("filterThemes");
      const filterExtensions = document.getElementById("filterExtensions");

      function handleThemeFilter() {
        syncFilters();
        const a = document.getElementById("css-filter-themes");

        if (filterThemes.checked) {
          param("1", "y");
          a.innerHTML = "";
        } else {
          param("1", "n");
          a.innerHTML = ".filter-themes { display: none }";
        }

        byteconfused();
      }

      function handleExtensionFilter() {
        syncFilters();
        const a = document.getElementById("css-filter-extensions");

        if (filterExtensions.checked) {
          param("2", "y");
          a.innerHTML = "";
        } else {
          param("2", "n");
          a.innerHTML = ".filter-extensions { display: none }";
        }

        byteconfused();
      }

      function byteconfused() {
        var byte = document.getElementById("byte-confused");
        var url = new URL(window.location.href);
        var c = document.getElementById("filterThemes");
        var d = document.getElementById("filterExtensions");

        if (
          url.searchParams.get("1") == "n" &&
          url.searchParams.get("2") == "n"
        ) {
          byte.style.display = "inline";
        } else if (!c.checked && !d.checked) {
          byte.style.display = "inline";
        } else byte.style.display = "none";
      }

      function syncFilters() {
        if (filterExtensions.checked) {
          document.getElementById("filterModalExtensions").checked = true;
        } else {
          document.getElementById("filterModalExtensions").checked = false;
        }
        if (filterThemes.checked) {
          document.getElementById("filterModalThemes").checked = true;
        } else {
          document.getElementById("filterModalThemes").checked = false;
        }
      }

      filterThemes.addEventListener("change", handleThemeFilter);
      filterExtensions.addEventListener("change", handleExtensionFilter);

      function filter() {
        const url = new URL(window.location.href);
        const a = document.getElementById("css-filter-themes"),
          b = document.getElementById("css-filter-extensions"),
          c = document.getElementById("filterThemes"),
          d = document.getElementById("filterExtensions");

        if (url.searchParams.get("1") == "y") {
          a.innerHTML = "";
          c.checked = true;
        } else if (url.searchParams.get("1") == "n") {
          a.innerHTML = ".filter-themes { display: none }";
          c.checked = false;
        } else {
          a.innerHTML = "";
          c.checked = true;
        }

        if (url.searchParams.get("2") == "y") {
          b.innerHTML = "";
          d.checked = true;
        } else if (url.searchParams.get("2") == "n") {
          b.innerHTML = ".filter-extensions { display: none }";
          d.checked = false;
        } else {
          b.innerHTML = "";
          d.checked = true;
        }

        byteconfused();
        syncFilters();
      }

      filter();
      byteconfused();


      // Focus search bar on CTRL+F
      document.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.key === 'f') {
          e.preventDefault();

          const elementToFocus = document.getElementById('productSearch');
          if (elementToFocus) {
            elementToFocus.focus();
          }
        }
      });
    </script>
  </body>
</html>
